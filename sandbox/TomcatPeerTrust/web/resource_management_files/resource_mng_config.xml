<resourceManagementConfiguration>

<ResourceClassifier type="..">
	<!--  use attribute overwrite to cope with multiple match -->
	<!-- ********************start new demo jsp and htmk -->
	<resourceClass
		url="/data/publications/acm/.*"
		matchingStrategy="_reg_exp_"	
		policyName="acmMemberPolicy"
		credentials="cred_acmMember"
		/>
	
	<resourceClass
		url="/data/publications/ieee/.*"
		matchingStrategy="_reg_exp_"
		policyName="ieeeMemberPolicy"
		credentials="cred_ieeeMember"
	/>
	
	<resourceClass
		url="/data/publications/springer/.*"
		matchingStrategy="_reg_exp_"
		policyName="springerReaderPolicy"
		credentials="cred_ieeeMember"
	/>
	
	<resourceClass
		isProtected="true" 
		url="/data/publications/conf/.*"
		matchingStrategy="_reg_exp_"
		policyName="conferenceAttendeePolicy"
		credentials="cred_conferenceAttendee"
	/>	
	
	<resourceClass
		isProtected="true" 
		url="/demo/jsp/.*.jsp"
		matchingStrategy="_reg_exp_"
		policyName="jspForceSessionRegistration"
	/>
</ResourceClassifier>

<policySystem type="..">
	<policy
		policyName="jspForceSessionRegistration"
		policyValue="jspForceSessionRegistration(jsp)"
		includedPolicy="" 
		/>
	
	<policy
		policyName="acmMemberPolicy"
		policyValue="acmMemberPolicy(Requester)"
		includedPolicy="" 
		/>
		
	<policy
		policyName="ieeeMemberPolicy"
		policyValue="ieeeMemberPolicy(Requester)"
		includedPolicy="" 
		/>
	
	<policy
		policyName="springerReaderPolicy"
		policyValue="springerReaderPolicy(Requester)"
		includedPolicy="" 
		/>
	
	<policy
		policyName ="conferenceAttendeePolicy"
		policyValue="conferenceAttendeePolicy(Requester)"
		includedPolicy="" 
		/>
		
		
	<policy
		policyName ="peertrustCommunityMemberPolicy"
		policyValue="peertrustCommunityMemberPolicy(Requester)"
		includedPolicy="" 
		/>
</policySystem>

<RequestServingMechanism type="...">
	<mechanism 	name="default"
				class="org.peertrust.demo.resourcemanagement.RequestServingByFollowingChain"
				forwardTo="" 
				matchingPattern="*">
	</mechanism>
	
	<mechanism 	name="sessionRegistration"
				class="org.peertrust.demo.resourcemanagement.RequestServingByForwarding"
				context="/demo"
				forwardTo="/jsp/sessionRegistration.jsp"
				matchingPattern="/jsp/sessionRegistration.jsp">
	</mechanism>
	
	<mechanism 	name="credentialDownload"
				class="org.peertrust.demo.resourcemanagement.RequestServingByForwarding"
				context="/demo"
				forwardTo="/jsp/credentialDownload.jsp"
				matchingPattern="/jsp/credentialDownload.jsp">
	</mechanism>
	
	<mechanism 	name="virtual_dir_demo_loader"
				class="org.peertrust.demo.resourcemanagement.RequestServingByLoadingFromExtDir"
				baseDir="file:///home/pat_dev/eclipse_home/workspace_3_1/TomcatPeerTrust/"
				matchingPattern="/fififififififi/demo/.*">
	</mechanism>
	
</RequestServingMechanism>

<CredentialStore>
	<Credential 
		name="cred_ieeeMember" 
		value="signed(rule(ieeeMember(Requester) @ ieee, [], []),ieee, signature(ieee))."
		description="Membership in IEEE">
		
	</Credential>
	<Credential 
		name="cred_springerReader" 
		value="signed(rule(springer(Requester) @ springer, [], []),springer, signature(springer))."
		description="Springer Reader">
	</Credential>
	<Credential 
		name="cred_peertrustCommunityMember" 
		value="signed(rule(peertrustCommunityMember(Requester) @ peertrustCommunity, [], []),peertrustCommunity, signature(peertrustCommunity))."
		description="PeerTrust Community membership">
	</Credential>
	
	<Credential 
		name="cred_acmMember" 
		value="signed(rule(ieeeMember(Requester) @ acm, [], []),acm, signature(acm))."
		description="ACM Membership">
	</Credential>	
</CredentialStore>
</resourceManagementConfiguration>